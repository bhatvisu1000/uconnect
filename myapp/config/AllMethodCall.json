//Register Member
// Client Action
//  WEB:
//      1. User inputs desired loginid/password: Validate LoginId/Password
//      2.) If success, Gather following information
//          a. LastName
//          b. First Name
//          c. Zip Code
//          d. Contact (Phone/Email)
//      3.) Submit data for registration, following response will be returned 
//          _Id (MemberId)
//          Main
//          Address
//          Contact
//          Connections
//          AuthKey

// Registration
// Register Member
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Registration","ActionId":"RegisterEntity","Page":"None"
                },
            "MainArg":
                {
                    "Auth":
                        {
                            "LoginId":"anil",
                            "LoginType":"Web",
                            "Password":"anil",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        },
                    "Main":{"LastName":"Singh","FirstName":"Anil","NickName":"AS"},
                    "Address":{"ZipCode":"08816"},
                    "Contact":{"Email":"anil@uconnect.com"}
                }
        }
}
// generate secutity code
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Registration","ActionId":"GenerateSecCode","Page":"None"
                },
            "MainArg":
                {"SecurityCode":{"LoginId":"anil", "DeliveryMethod":"Email", "DeliverTo":"anil@uconnect.com"}}
        }
}

// validate security code
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Registration","ActionId":"ValidateSecCode","Page":"None"
                },
            "MainArg":
                {"SecurityCode":{"LoginId":"anil", "SecurityCode":23208}}
        }
}

// Login Screen
// isLoginIuse
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Login","ActionId":"IsLoginInUse","Page":"None"
                },
            "MainArg":
                {
                    "Auth":
                        {
                            "LoginId":"vishal"
                        }
                }
        }
}
// validate login id
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Login","ActionId":"Authenticate","Page":"None"
                },
            "MainArg":
                {"Auth":
                    {
                        "LoginId":"vishal",
                        "LoginType":"Web",
                        "Password":"bhatt",
                        "DeviceOs":"Mobile",
                        "DeviceType":"OS2",
                        "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                        "EntityType":"Member",
                        "AppVer":"1.0",
                        "SessionId":"aaabbbccc"
                    }
                }
        }
}

// Get A Member Detail

{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"getAMemberDetail","Page":"None"
                },
            "MainArg":
                {
                    "Auth":
                        {
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

// isAValidMember
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"isAValidMember","Page":"None"
                },
            "MainArg":
                {
                    "Member":{"_id":314290}
                }
        }
}
// Update Member detail
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"updateMemberDetail","Page":"None"
                },
            "MainArg":
                {
                    "_id":314289,
                    "Main":{"LastName":"Bhat1","FirstName":"Vishal1"},
                    "Address":{"Street":"1 Main Street", "ZipCode":"08817", "City":"Newark","State":"PA"},
                    "Contact":{"Email":"a@b.com"},
                    "Auth":
                        {
                            "AuthKey":"592794a6df9bba207089de62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314289,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

// Update Connection details 
// new
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"UpdateConnectionDetails","Page":"None"
                },
            "MainArg":
                {
                    "_id":314291,
                    "Connections":[{"Id":314290,"Type":"Member","Action":"Invite"}],
                    "Auth":
                        {
                            "AuthKey":"592b9acadf9bba38bcf8fafb",
                            "LoginType":"Web",
                            "LoginId":"anil",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314291,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}
// accept
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"UpdateConnectionDetails","Page":"None"
                },
            "MainArg":
                {
                    "_id":314290,
                    "Connections":[{"Id":314291,"Type":"Member","Action":"Accept"}],
                    "Auth":
                        {
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

// reject

{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"UpdateConnectionDetails","Page":"None"
                },
            "MainArg":
                {
                    "_id":314290,
                    "Connections":[{"Id":314291,"Type":"Member","Action":"Reject"}],
                    "Auth":
                        {
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

// remove
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"UpdateConnectionDetails","Page":"None"
                },
            "MainArg":
                {
                    "_id":314290,
                    "Connections":[{"Id":314291,"Type":"Member","Action":"Remove"}],
                    "Auth":
                        {
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

//Favorite
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"UpdateConnectionDetails","Page":"None"
                },
            "MainArg":
                {
                    "_id":314290,
                    "Connections":[{"Id":314291,"Type":"Member","Action":"Favorite","Favorite":1}],
                    "Auth":
                        {
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

//Block
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"UpdateConnectionDetails","Page":"None"
                },
            "MainArg":
                {
                    "_id":314290,
                    "Connections":[{"Id":314291,"Type":"Member","Action":"Block","Blocked":1}],
                    "Auth":
                        {
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginType":"Web",
                            "LoginId":"vishal",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

//

python
from com.uconnect.bps.memberBPS import MemberBPS
member = MemberBPS.Instance()

{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"AddANewConnection","Page":"None"
                },
            "MainArg":
                {
                    "MemberId":314263,
                    "ConnectMemberId":314262,
                    "Auth":
                        {  
                            "AuthKey":"591279dcdf9bba3be4147cb4",
                            "LoginId":"vishal",
                            "LoginType":"Web",
                            "Password":"bhatt",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

myConnection = member.AddANewMemberConnection(arg)
print(myConnection)
exit()

// Accept/Reject/Remove Invitation

{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"ActionOnAMemberConnection","Page":"None"
                },
            "MainArg":
                {
                    "MemberId":314187,
                    "ConnectMemberId":314188,
                    "Action":"Remove",
                    "Auth":
                        {  
                            "AuthKey":"591279dcdf9bba3be4147cb4",
                            "LoginId":"vishal",
                            "LoginType":"Web",
                            "Password":"bhatt",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "AppVer":"1.0",
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

// Seacrh member
{
    "Request":
        {
            "Header":
                {
                    "ScreenId":"Member","ActionId":"SearchMember","Page":"None"
                },
            "MainArg":
                {
                    "SearchCriteria":"anil",
                    "Page":"0",
                    "Auth":
                        {  
                            "AuthKey":"5929f4b1df9bba469867ab62",
                            "LoginId":"vishal",
                            "LoginType":"Web",
                            "Password":"bhatt",
                            "DeviceOs":"Mobile",
                            "DeviceType":"OS2",
                            "MacAddress":"SDFSDKLGHASKLDFGHSAKLFG214ADFA",
                            "AppVer":"1.0",
                            "EntityType":"Member",
                            "EntityId":314290,
                            "SessionId":"aaabbbccc"
                        }
                }
        }
}

//
python
from com.uconnect.bps.memberBPS import MemberBPS
member = MemberBPS.Instance()
arg = {"MainArg":
                {
                    "MemberId":314187,
                    "ConnectMemberId":314188,
                    "Action":"Remove",
                    "ResponseMode":"E",
                    "Auth":
                        {  
                            "AuthKey":"591279dcdf9bba3be4147cb4",
                            "EntityType" : "Member",
                            "SessionId" : "aaabbbccc",
                            "LoginType" : "Mobile",
                            "AppVer" : "1.0",
                            "DeviceType" : "OS2",
                            "EntityId" : 314187,
                            "LoginId" : "anil2",                            
                            "Password":"anil2",
                            "DeviceOs":"Mobile",
                            "MacAddress" : "SDFSDKLGHASKLDFGHSAKLFG214ADFA"
                        }
                }
            }
myConnection = member.AcceptConnection(arg)
print(myConnection)
exit()



// create a collection for feed (external to users) and activity log for internal purpose only
// we also need to create a collection to hold entitytype/id and any changes (which type of changes)


// end email
senders = 'anil.singh.aditya@gmail.com'
receivers = 'oracledba.usa88@gmail.com'
message = """ your security code is 88888 """
try:  
    server = smtplib.SMTP_SSL('smtp.gmail.com', 465)
    server.ehlo()
    server.login('anil.singh.aditya@gmail.com', 'NeanG00gle001')
    server.sendmail(receivers, receivers, message)
    server.close()
    print 'Email sent!'
except Exception as err:  
    print 'Something went wrong...'
    print err.message